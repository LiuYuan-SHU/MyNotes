> 
>
> 将数据保存为TXT文本的操作非常简单，而且TXT文本几乎兼容任何平台。但这也有一个缺点，那就是不利于检索。所以如果对检索和数据结构的要求不高，追求方便第一的话，就可以采用TXT文本存储

[TOC]

# 1. 本节目标

以[电影实例网站](https://ssr1.scrape.center)为例，爬取首页10部电影的数据，然后将相关信息保存为TXT文本格式。

# 2. 基本实例

[4.1_TXT.py](https://github.com/LiuYuan-SHU/MyNotes/blob/650e7432abbe218579549dd468fcc7fa19d7be14/Crawler%20with%20Python3/Python3%20web%20crawler%20development%20practice%EF%BC%88Edition2%EF%BC%89%20-%20Cui%20Qingcai/%E7%AC%AC%E5%9B%9B%E7%AB%A0/4.1_TXT.py)

# 3. 笔记

## txt文件操作——打开方式

* r：以只读方式打开一个文件，意思是读取文件内容，而不能写入。这也是默认模式
* rb：以二进制只读方式打开一个文件，通常用于打开二进制文件，例如音频、图片、视频等
* r+：以读写方式打开一个文件，既可以读文件又可以写文件
* rb+：以二进制读写方式打开一个文件，同样既可以读又可以写，只不过读取和写入的都是二进制数据
* w：以写入方式打开一个文件。如果文件已经存在，则将其覆盖；如果该文件不存在，则创建新文件
* wb：以二进制写入方式打开一个文件。如果该文件已经存在，则将其覆盖；如果该文件不存在，则创建新文件
* w+：以读写方式打开一个文件。如果该文件已经存在，则将其覆盖。如果该文件不存在，则创建新文件
* a：以追加方式打开一个文件。如果该文件已经存在，则文件指针将会放在文件结尾。也就是说，新的内容将会被写到已有内容之后；如果文件不存在，则创建新文件来写入
* ab：以二进制追加方式打开一个文件。如果该文件已经存在，则文件指针会放在文件末尾。也就是说，新的内容将会被写到已有内容之后。如果该文件不存在，则创建新文件来写入
* a+：以读写方式打开一个文件。如果该文件已经存在，则文件指针将会放在文件尾。文件打开时会是追加模式。如果该文件不存在，则创建新文件用于读写
* ab+：以二进制追加方式打开一个文件。如果该文件已经存在，则文件指针将会放在文件结尾。如果该文件不存在，那么创建新文件用于读写。

### 简化写法

文件写入还有一种简写方法，就是使用`with as`语法。当`with`控制块结束的时候，文件会自动关闭。这意味着不需要再调用`close`方法。

```python
with open('movies.txt', 'w', encoding='utf-8') as file:
    file.write(f'名称：{name}\n')
    ...
```

## 列表表达式

> 列表表达式的形式：`[表达式 for 变量 in 列表 (if 条件)]`

```python
categories = [item.text() for item in item.find('.categories button span').items()]
```

列表表达式的作用是生成一个列表，其能够简化一个简单循环的操作。

我们通过这样的方式分析这一行代码：

1. `item.find('.categories button span').items()`

    这一行的代码的作用是，将`find`函数返回的结果用`items`函数处理成一个列表

2. `item in item.find(...)`

    这里，我们用`item`来代指`1.`中查找返回的列表中的每一个元素，其实这里也就是循环处理的过程

3. `item.text() for ...`

    这里就是循环的处理内容。将每一个`item`进行`item.text()`操作，然后将返回的结果放到新的列表中，然后返回

所以这一行代码等同于：

```python
categories = []
for item in item.find('.categories button span').items():
    categories.append(item.text())
```

