# Java 多线程详解

> https://www.bilibili.com/video/BV1V4411p7EF
>

[TOC]

## 线程简介

- 程序，进程，线程：

  在操作系统中运行的程序就是进程，一个进程中的声音、图像、字母，就分别是进程中的一个线程

**Progress（进程）**和**Thread（线程）**

- 程序是置零和数据的有序集合，其本身没有任何运行的含义，是一个静态的概念
- 而进程则是执行程序的一次执行过程，它是一个动态的概念。是系统资源分配的单位
- 通常在一个金晨钟可以包含若干个**线程**，当然一个金晨钟至少有一个线程，不然没有存在的意义。线程是CPU调度和执行的单位

### 核心概念

- 线程就是独立的执行路径
- 在程序运行时，即使没有自己创建线程，后台也会有多个线程，如主线程，gc线程
- main()称之为主线程，为系统的入口，用于执行整个程序
- 在一个进程中，如果开辟了多个线程，线程的运行由调度器安排调度，调度器是与操作系统紧密相关的，先后顺序是不能人为干预的
- 对同一份资源操作时，会存在资源抢夺的问题，需要加入并发控制
- 线程会带来额外的开销，如CPU调度时间，并发控制开销
- 每个线程在自己的工作内存交互，内存控制不当会造成数据不一致



## 线程实现（重点）

### 线程创建

三种创建方式：

1. Thread class：继承Thread类（重点）
2. Runnable接口：实现Runnable接口（重点）
3. Callable接口：实现Callable接口（了解）



### Thread - 自定义线程类继承**Thread类**

***详见`Notes`中的Demo1，Demo2***

1. 重写`run()`方法，编写线程执行体
2. 创建线程对象，调用`子类对象.start()`方法启动线程

**总结**：线程开启不一定立即执行，由CPU调度执行



### 实现Runnable - 由于Java单继承的局限性，推荐使用

- 定义`MyRunnable`类实现`Runnable`接口
- 实现`run()`方法，编写线程执行体
- 创建线程对象，`目标对象+Thread对象.start()`启动线程

**避免单继承局限性，灵活方便，方便同一个对象被多个线程使用**



## 案例：龟兔赛跑 ——Race



## 线程状态

## 线程同步（重点）

## 线程通信问题

## 高级主题

